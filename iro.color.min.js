/*! 
	iro.color.js
	MIT Lisense 
	(c) 2015 Retorillo
*/
var iro=iro||{version:"beta1"};iro.Color=function(n){function t(){function l(n,r){var u,s,h,o;if(!c&&n!==r&&f[r])try{c=!0;u=null;switch(n){case t.models.hsx:u=e?t.hsv2rgb(i):t.hsl2rgb(i);break;case t.models.cmyk:u=t.cmyk2rgb(i);break;case t.models.rgb:u=i}switch(r){case t.models.hsx:e?(s=t.rgb2hsv(u),i.hsv(s.h,s.s,s.v)):(h=t.rgb2hsl(u),i.hsl(h.h,h.s,h.l));break;case t.models.cmyk:o=t.rgb2cmyk(u);i.cmyk(o.c,o.m,o.y,o.k);break;case t.models.rgb:i.rgb(u.r,u.g,u.b)}f[r]=!1;f[t.models.rgb]||(i.rgb(u.r,u.g,u.b),f[t.models.rgb]=!1)}finally{c=!1}}function u(n,t,r,u){var e=u.limiter(t,u.max),o=!1;return Object.defineProperty(i,n,{configurable:!0,get:function(){if(o)throw new Error(['"',n,'" is inaccessible'].join(""));return r!=null&&l(h,r),e},set:function(t){if(o)throw new Error(['"',n,'" is inaccessible'].join(""));if(r!=null&&l(h,r),e=u.limiter(t,u.max),r!=null&&!c){for(var i=0;i<f.length;i++)f[i]=i!=r;h=r}}}),{get:function(){return e},set:function(n){e=n},lock:function(){o=!0},unlock:function(){o=!1}}}var i=this,e=t.isClassOf(arguments[0])?arguments[0].useHsv:t.useHsv,h=t.models.rgb,f=[!1,!1,!1],c=!1,y=u("r",0,t.models.rgb,t.settings.r),p=u("g",0,t.models.rgb,t.settings.g),w=u("b",0,t.models.rgb,t.settings.b),a=u("h",0,t.models.hsx,t.settings.h),v=u("s",0,t.models.hsx,t.settings.s),o=u("v",0,t.models.hsx,t.settings.x),s=u("l",0,t.models.hsx,t.settings.x),b=u("c",0,t.models.cmyk,t.settings.c),k=u("m",0,t.models.cmyk,t.settings.m),d=u("y",0,t.models.cmyk,t.settings.y),g=u("k",0,t.models.cmyk,t.settings.k),nt=u("a",1,null,t.settings.a);if(Object.defineProperty(i,"clsid",{get:function(){return r}}),Object.defineProperty(i,"model",{get:function(){return h}}),Object.defineProperty(i,"useHsv",{get:function(){return e},set:function(n){var i,r;(!e||!n)&&(e||n)&&(h!=t.models.hsx?(f[t.models.hsx]=!0,n?(o.unlock(),s.lock()):(s.unlock(),o.lock())):n?(i=t.rgb2hsv(this),this.h=i.h,this.s=i.s,o.unlock(),this.v=i.v,s.lock()):(r=t.rgb2hsl(this),this.h=r.h,this.s=r.s,s.unlock(),this.l=r.l,o.lock()),e=n)}}),e?s.lock():o.lock(),arguments[0]!==n){if(typeof arguments[0]=="string"&&t.str2format(arguments[0],null)!=null)throw Error('"',arguments[0],'" is invalid argument');this.css(arguments[0])}this.dump=function(){var n=function(n){return n.get().toFixed(2)},u=[n(y),n(p),n(w)],e=[n(b),n(k),n(d),n(g)],h=this.useHsv?[n(a),n(v),n(o)]:[n(a),n(v),n(s)],i=" == ",r=" != ",c=f[t.models.rgb]?r:i,l=f[t.models.cmyk]?r:i,tt=f[t.models.hsx]?r:i,it=this.useHsv?"HSV":"HSL";return["ALPHA",i,n(nt),"\n","RGB",c,u.join(", "),"\n","CMYK",l,e.join(", "),"\n",it,tt,h.join(", ")].join("")}}var r={},i;return t.epsilon=1e-12,t.isClassOf=function(n){return n!=null&&n.clsid===r},t.useHsv=!1,t.formats={},t.formats.rgba=0,t.formats.hsla=1,t.formats.rgb=2,t.formats.hsl=3,t.formats.hex=4,t.models={},t.models.rgb=0,t.models.hsx=1,t.models.cmyk=2,t.limiters={},t.limiters.circuit=function(n,t){var i=n%t;return i<0&&(i+=t),i},t.limiters.linear=function(n,t){return Math.max(0,Math.min(n,t))},t.settings={},t.settings.a={max:1,limiter:t.limiters.linear},t.settings.r={max:255,limiter:t.limiters.linear},t.settings.g={max:255,limiter:t.limiters.linear},t.settings.b={max:255,limiter:t.limiters.linear},t.settings.h={max:360,limiter:t.limiters.circuit},t.settings.s={max:100,limiter:t.limiters.linear},t.settings.x={max:100,limiter:t.limiters.linear},t.settings.c={max:100,limiter:t.limiters.linear},t.settings.m={max:100,limiter:t.limiters.linear},t.settings.y={max:100,limiter:t.limiters.linear},t.settings.k={max:100,limiter:t.limiters.linear},t.blends={},t.blends.normal=function(n){return n},t.blends.multiply=function(n,t){return n*t/255},t.blends.divide=function(n,t){return 256*t/(n+1)},t.blends.screen=function(n,t){return 255-(255-n)*(255-t)/255},t.blends.overlay=function(n,t){return t/255*(t+2*n/255*(255-t))},t.blends.dodge=function(n,t){return 256*t/(256-n)},t.blends.burn=function(n,t){return 255-256*(255-t)/(n+1)},t.blends.hardlight=function(n,t){return n>128?255-(255-2*(n-128))*(255-t)/256:2*n*t/256},t.blends.softlight=function(n,i){var r=t.blends.screen(n,i);return(255-i)*n*r/255*i},t.blends.difference=function(n,t){return Math.abs(t-n)},t.blends.add=function(n,t){return n+t},t.blends.subtract=function(n,t){return t-n},t.blends.darken=function(n,t){return Math.min(n,t)},t.blends.lighten=function(n,t){return Math.max(n,t)},t.rgb2hsl=function(n){var u=t.settings.r.limiter(n.r,t.settings.r.max)/t.settings.r.max,f=t.settings.g.limiter(n.g,t.settings.g.max)/t.settings.g.max,o=t.settings.b.limiter(n.b,t.settings.b.max)/t.settings.b.max,i=Math.max(u,f,o),e=Math.min(u,f,o),r=i-e,s,h,c;return s=r==0?0:i==u?(f-o)/r%6/6:i==f?(o-u)/(r*6)+1/3:(u-f)/(r*6)+2/3,h=(i+e)/2,c=r==0?0:i+e>=1?r/(2-i-e):r/(i+e),{h:t.settings.h.limiter(s*t.settings.h.max,t.settings.h.max),s:t.settings.s.limiter(c*t.settings.s.max,t.settings.s.max),l:t.settings.x.limiter(h*t.settings.x.max,t.settings.s.max)}},t.hsl2rgb=function(n){var h=t.settings.h.limiter(n.h,t.settings.h.max)/t.settings.h.max,c=t.settings.s.limiter(n.s,t.settings.s.max)/t.settings.s.max,s=t.settings.x.limiter(n.l,t.settings.x.max)/t.settings.x.max,r=(1-Math.abs(2*s-1))*c,i=h*6,u=r*(1-Math.abs(i%2-1)),e=s-.5*r,o=[e,e,e],f=null;return f=0<=i&&i<1?[r,u,0]:1<=i&&i<2?[u,r,0]:2<=i&&i<3?[0,r,u]:3<=i&&i<4?[0,u,r]:4<=i&&i<5?[u,0,r]:[r,0,u],{r:t.settings.r.limiter((o[0]+f[0])*t.settings.r.max,t.settings.r.max),g:t.settings.g.limiter((o[1]+f[1])*t.settings.g.max,t.settings.g.max),b:t.settings.b.limiter((o[2]+f[2])*t.settings.b.max,t.settings.b.max)}},t.rgb2hsv=function(n){var i=t.settings.r.limiter(n.r,t.settings.r.max)/t.settings.r.max,r=t.settings.g.limiter(n.g,t.settings.g.max)/t.settings.g.max,f=t.settings.b.limiter(n.b,t.settings.b.max)/t.settings.b.max,e=Math.max(i,r,f),c=Math.min(i,r,f),u=e-c,s,o,h;return s=u==0?0:e==i?(r-f)/u%6/6:e==r?(f-i)/(u*6)+1/3:(i-r)/(u*6)+2/3,o=e,h=o==0?0:u/o,{h:t.settings.h.limiter(s*t.settings.h.max,t.settings.h.max),s:t.settings.s.limiter(h*t.settings.s.max,t.settings.s.max),v:t.settings.x.limiter(o*t.settings.x.max,t.settings.x.max)}},t.hsv2rgb=function(n){var h=t.settings.h.limiter(n.h,t.settings.h.max)/t.settings.h.max,c=t.settings.s.limiter(n.s,t.settings.s.max)/t.settings.s.max,s=t.settings.x.limiter(n.v,t.settings.x.max)/t.settings.x.max,r=s*c,i=6*h,u=r*(1-Math.abs(i%2-1)),e=s-r,o=[e,e,e],f;return f=0<=i&&i<1?[r,u,0]:1<=i&&i<2?[u,r,0]:2<=i&&i<3?[0,r,u]:3<=i&&i<4?[0,u,r]:4<=i&&i<5?[u,0,r]:[r,0,u],{r:t.settings.r.limiter((o[0]+f[0])*t.settings.r.max,t.settings.r.max),g:t.settings.g.limiter((o[1]+f[1])*t.settings.g.max,t.settings.g.max),b:t.settings.b.limiter((o[2]+f[2])*t.settings.b.max,t.settings.b.max)}},t.rgb2cmyk=function(n){var r=t.settings.r.limiter(n.r,t.settings.r.max)/t.settings.r.max,u=t.settings.g.limiter(n.g,t.settings.g.max)/t.settings.g.max,f=t.settings.b.limiter(n.b,t.settings.b.max)/t.settings.b.max,i=1-Math.max(r,u,f),e=i==1?0:(1-r-i)/(1-i),o=i==1?0:(1-u-i)/(1-i),s=i==1?0:(1-f-i)/(1-i);return{c:t.settings.c.limiter(e*t.settings.c.max,t.settings.c.max),m:t.settings.m.limiter(o*t.settings.m.max,t.settings.m.max),y:t.settings.y.limiter(s*t.settings.y.max,t.settings.y.max),k:t.settings.k.limiter(i*t.settings.k.max,t.settings.k.max)}},t.cmyk2rgb=function(n){var r=t.settings.c.limiter(n.c,t.settings.c.max)/t.settings.c.max,u=t.settings.m.limiter(n.m,t.settings.m.max)/t.settings.m.max,f=t.settings.y.limiter(n.y,t.settings.y.max)/t.settings.y.max,i=t.settings.k.limiter(n.k,t.settings.k.max)/t.settings.k.max,e=(1-r)*(1-i),o=(1-u)*(1-i),s=(1-f)*(1-i);return{r:t.settings.r.limiter(e*t.settings.r.max,t.settings.r.max),g:t.settings.g.limiter(o*t.settings.g.max,t.settings.g.max),b:t.settings.b.limiter(s*t.settings.b.max,t.settings.b.max)}},t.str2format=function(i,r){if(i!=null){i=i.toLowerCase();for(var u in t.formats)if(u==i)return t.formats[u]}if(r!==n)return r;throw new Error(['"',i,'" is invalid argument'].join(""));},t.str2blend=function(i,r){if(i!=null){i=i.toLowerCase();for(var u in t.blends)if(u==i)return t.blends[u]}if(r!==n)return r;throw new Error(['"',i,'" is invalid argument'].join(""));},t.name=function(){var e,r,f,u,n;if(arguments.length==0){for(e=[],n=0;n<i.length;n+=2)e.push(i[n]);return e}if(r=arguments[0],r=r.toLowerCase(),arguments.length==1){for(n=0;n<i.length;n+=2)if(i[n]==r)return i[n+1];throw new Error(['"',r,'" is invalid color name'].join(""));}if(t.str2format(r,null)!=null)throw new Error(['"',r,'" cannnot be used for color name.'].join(""));for(f=arguments[1],u=-1,n=0;n<i.length;n+=2)if(i[n]==r){u=n;break}u!=-1&&f!=null?i[u+1]=f:u!=-1?i.splice(u,2):f!=null&&i.push(r,f)},t.prototype.hsl=function(){var t=arguments,r,i;return t.length==0?this.useHsv?(r=this.clone(),r.useHsv=!1,r.hsl()):[this.h,this.s,this.l,this.a]:(this.useHsv=!1,t=arguments,t.length==0)?[this.h,this.s,this.l,this.a]:(i=t.length==1?t[0]instanceof Array?t[0]:[t[0].h,t[0].s,t[0].l,t[0].a]:t,this.h=i[0],this.s=i[1],this.l=i[2],this.a=i[3]!==n?i[3]:this.a,this)},t.prototype.hsv=function(){var t=arguments,r,i;return t.length==0?this.useHsv?[this.h,this.s,this.v,this.a]:(r=this.clone(),r.useHsv=!0,r.hsv()):(this.useHsv=!0,i=t.length==1?t[0]instanceof Array?t[0]:[t[0].h,t[0].s,t[0].v,t[0].a]:t,this.h=i[0],this.s=i[1],this.v=i[2],this.a=i[3]!==n?i[3]:this.a,this)},t.prototype.cmyk=function(){var t=arguments,i;return t.length==0?[this.c,this.m,this.y,this.k,this.a]:(i=t.length==1?t[0]instanceof Array?t[0]:[t[0].c,t[0].m,t[0].y,t[0].k,t[0].a]:t,this.c=i[0],this.m=i[1],this.y=i[2],this.k=i[3],this.a=i[4]!==n?i[4]:this.a,this)},t.prototype.rgb=function(){var t=arguments,i;return t.length==0?[this.r,this.g,this.b,this.a]:(i=t.length==1?t[0]instanceof Array?t[0]:[t[0].r,t[0].g,t[0].b,t[0].a]:t,this.r=i[0],this.g=i[1],this.b=i[2],this.a=i[3]!==n?i[3]:this.a,this)},t.prototype.offset=function(n,t){return this[n]+=t,this},t.prototype.o=t.prototype.offset,t.prototype.clone=function(){var n=new t(this);return n.useHsv=this.useHsv,n},t.prototype.css=function(){var r=arguments[0],o,h,e,c,i;if(t.isClassOf(r)){switch(r.model){case t.models.cmyk:this.cmyk(r);break;case t.models.hsx:this.useHsv?this.hsv(r):this.hsx(r);break;default:this.rgb(r)}return this}if(typeof r=="string"&&(r=t.str2format(r,r)),typeof r=="string"){if(o=/^(rgb|rgba|hsl|hsla)\((\d+),(\d+)%?,(\d+)%?(?:,(\d+(?:\.\d+)?))?\)$|^#?([\da-f]{6}|[\da-f]{3})$/i.exec(r.replace(/\s+/g,"")),o==null)return this.css(t.name(r));var u=1,d=(o[u++]||"").toLowerCase(),f=[u++,u++,u++,u++];f.forEach(function(n,t){f[t]=o[n]?parseFloat(o[n]):1});i=o[u++];h=i!=null&&i.length==3;switch(d){case"hsl":case"hsla":this.hsl(f[0]/360*t.settings.h.max,f[1]/100*t.settings.s.max,f[2]/100*t.settings.x.max,f[3]);break;default:this.rgb((i?parseInt(h?i[0]+i[0]:i.substr(0,2),16):f[0])/255*t.settings.r.max,(i?parseInt(h?i[1]+i[1]:i.substr(2,2),16):f[1])/255*t.settings.g.max,(i?parseInt(h?i[2]+i[2]:i.substr(4,2),16):f[2])/255*t.settings.b.max,f[3])}return this}e=this;c=r;c&&(c===t.formats.hsla||c===t.formats.hsl)&&this.useHsv&&(e=this.clone(),e.useHsv=!1);var b=function(n){return Math.min(1,Math.max(0,n))},s=function(n,t){return Math.round(b(n)*t)},l,u,a,v,y,p,k=b(e.a).toFixed(1),w=function(){l=s(e.r/t.settings.r.max,255);u=s(e.g/t.settings.g.max,255);a=s(e.b/t.settings.b.max,255)},g=function(){v=s(e.h/t.settings.h.max,360);y=s(e.s/t.settings.s.max,100);p=s(e.l/t.settings.x.max,100)};r!==n||this.useHsv||this.model!=t.models.hsx||(r=t.formats.hsla);switch(r){case t.formats.hex:return w(),i=[l,u,a],i.forEach(function(n,t){var n=n.toString(16);i[t]=n.length==1?0+n:n}),i.splice(0,0,"#"),i.join("");case t.formats.hsl:return compuehsl(),["hsl(",[v,y+"%",p+"%"].join(", "),")"].join("");case t.formats.hsla:return g(),["hsla(",[v,y+"%",p+"%",k].join(", "),")"].join("");case t.formats.rgb:return w(),["rgb(",[l,u,a].join(", "),")"].join("");default:return w(),["rgba(",[l,u,a,k].join(", "),")"].join("")}},t.prototype.blend=function(n,i){typeof n=="string"&&(n=new t(n));i==null&&(i=t.blends.normal);typeof i=="string"&&(i=t.str2blend(i));var o=n.r/t.settings.r.max,s=n.g/t.settings.g.max,h=n.b/t.settings.b.max,r=n.a,u=this.r/t.settings.r.max,f=this.g/t.settings.g.max,e=this.b/t.settings.b.max,c=i(o*255,u*255)/255,l=i(s*255,f*255)/255,a=i(h*255,e*255)/255,v=Math.max(Math.min(c,1),0)*r+u*(1-r),y=Math.max(Math.min(l,1),0)*r+f*(1-r),p=Math.max(Math.min(a,1),0)*r+e*(1-r);return this.r=Math.max(Math.min(v,1),0)*t.settings.r.max,this.g=Math.max(Math.min(y,1),0)*t.settings.g.max,this.b=Math.max(Math.min(p,1),0)*t.settings.b.max,this},t.prototype.equals=function(i,r){var u,e,f;if(typeof i=="string"&&(i=new t(i)),!t.isClassOf(i))return!1;switch(this.model){case t.models.cmyk:u=this.cmyk();e=i.cmyk();break;case t.models.hsx:u=this.useHsv?this.hsv():this.hsl();e=this.useHsv?i.hsv():i.hsl();break;default:u=this.rgb();e=i.rgb()}for(r===n&&(r=t.epsilon),f=0;f<u.length;f++)if(Math.abs(u[f]-e[f])>r)return!1;return!0},t.prototype.toString=function(n){return this.css(t.str2format(n,t.formats.rgba))},i=["black","#000000","silver","#c0c0c0","gray","#808080","white","#ffffff","maroon","#800000","red","#ff0000","purple","#800080","fuchsia","#ff00ff","green","#008000","lime","#00ff00","olive","#808000","yellow","#ffff00","navy","#000080","blue","#0000ff","teal","#008080","aqua","#00ffff","orange","#ffa500","aliceblue","#f0f8ff","antiquewhite","#faebd7","aquamarine","#7fffd4","azure","#f0ffff","beige","#f5f5dc","bisque","#ffe4c4","blanchedalmond","#ffe4c4","blueviolet","#8a2be2","brown","#a52a2a","burlywood","#deb887","cadetblue","#5f9ea0","chartreuse","#7fff00","chocolate","#d2691e","coral","#ff7f50","cornflowerblue","#6495ed","cornsilk","#fff8dc","crimson","#dc143c","darkblue","#00008b","darkcyan","#008b8b","darkgoldenrod","#b8860b","darkgray","#a9a9a9","darkgreen","#006400","darkgrey","#a9a9a9","darkkhaki","#bdb76b","darkmagenta","#8b008b","darkolivegreen","#556b2f","darkorange","#ff8c00","darkorchid","#9932cc","darkred","#8b0000","darksalmon","#e9967a","darkseagreen","#8fbc8f","darkslateblue","#483d8b","darkslategray","#2f4f4f","darkslategrey","#2f4f4f","darkturquoise","#00ced1","darkviolet","#9400d3","deeppink","#ff1493","deepskyblue","#00bfff","dimgray","#696969","dimgrey","#696969","dodgerblue","#1e90ff","firebrick","#b22222","floralwhite","#fffaf0","forestgreen","#228b22","gainsboro","#dcdcdc","ghostwhite","#f8f8ff","gold","#ffd700","goldenrod","#daa520","greenyellow","#adff2f","grey","#808080","honeydew","#f0fff0","hotpink","#ff69b4","indianred","#cd5c5c","indigo","#4b0082","ivory","#fffff0","khaki","#f0e68c","lavender","#e6e6fa","lavenderblush","#fff0f5","lawngreen","#7cfc00","lemonchiffon","#fffacd","lightblue","#add8e6","lightcoral","#f08080","lightcyan","#e0ffff","lightgoldenrodyellow","#fafad2","lightgray","#d3d3d3","lightgreen","#90ee90","lightgrey","#d3d3d3","lightpink","#ffb6c1","lightsalmon","#ffa07a","lightseagreen","#20b2aa","lightskyblue","#87cefa","lightslategray","#778899","lightslategrey","#778899","lightsteelblue","#b0c4de","lightyellow","#ffffe0","limegreen","#32cd32","linen","#faf0e6","mediumaquamarine","#66cdaa","mediumblue","#0000cd","mediumorchid","#ba55d3","mediumpurple","#9370db","mediumseagreen","#3cb371","mediumslateblue","#7b68ee","mediumspringgreen","#00fa9a","mediumturquoise","#48d1cc","mediumvioletred","#c71585","midnightblue","#191970","mintcream","#f5fffa","mistyrose","#ffe4e1","moccasin","#ffe4b5","navajowhite","#ffdead","oldlace","#fdf5e6","olivedrab","#6b8e23","orangered","#ff4500","orchid","#da70d6","palegoldenrod","#eee8aa","palegreen","#98fb98","paleturquoise","#afeeee","palevioletred","#db7093","papayawhip","#ffefd5","peachpuff","#ffdab9","peru","#cd853f","pink","#ffc0cb","plum","#dda0dd","powderblue","#b0e0e6","rosybrown","#bc8f8f","royalblue","#4169e1","saddlebrown","#8b4513","salmon","#fa8072","sandybrown","#f4a460","seagreen","#2e8b57","seashell","#fff5ee","sienna","#a0522d","skyblue","#87ceeb","slateblue","#6a5acd","slategray","#708090","slategrey","#708090","snow","#fffafa","springgreen","#00ff7f","steelblue","#4682b4","tan","#d2b48c","thistle","#d8bfd8","tomato","#ff6347","turquoise","#40e0d0","violet","#ee82ee","wheat","#f5deb3","whitesmoke","#f5f5f5","yellowgreen","#9acd32","rebeccapurple","#663399","transparent","rgba(0,0,0,0)"],t}();